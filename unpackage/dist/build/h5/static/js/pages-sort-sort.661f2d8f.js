(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sort-sort"],{"11ef":function(t,e,o){"use strict";var n=o("6a78"),i=o.n(n);i.a},"1fcd":function(t,e,o){"use strict";o.r(e);var n=o("f384"),i=o("abae");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("11ef");var r,s=o("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"5adab524",null,!1,n["a"],r);e["default"]=c.exports},"6a78":function(t,e,o){var n=o("6bc2");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("51356b6b",n,!0,{sourceMap:!1,shadowMode:!1})},"6bc2":function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".class-active[data-v-5adab524]{border-left:%?8?% solid #fd6801;color:#fd6801!important}",""]),t.exports=e},"7def":function(t,e,o){"use strict";var n=o("4ea4");o("4de4"),o("4160"),o("d81d"),o("d3b7"),o("ac1f"),o("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("96cf");var i=n(o("1da1")),a=n(o("868a")),r={mixins:[a.default],data:function(){return{showLoading:!0,activeIndex:0,cate:[],list:[{list:[{name:"你好",cover:"../../static/images/swiper4.jpg"}]},{list:[{name:"很好",cover:"../../static/images/swiper4.jpg"}]}],leftDomsTop:[],rightDomsTop:[],rightScrollTop:0,leftScrollTop:0,cateItemHeight:0}},watch:{activeIndex:function(t,e){var o=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.getElInfo({size:!0,scrollOffset:!0});case 2:if(n=e.sent,i=n.height,a=n.scrollTop,!(o.leftDomsTop[t]+o.cateItemHeight>i+a)){e.next=7;break}return e.abrupt("return",o.leftScrollTop=o.leftDomsTop[t]+o.cateItemHeight-i);case 7:a>o.cateItemHeight&&(o.leftScrollTop=o.leftDomsTop[t]);case 8:case"end":return e.stop()}}),e)})))()}},onLoad:function(){var t=this;this.getData(),this.$bus.$on("sortinfo",(function(e){console.log("wssmj"),console.log(e,985211111);var o=t.cate.filter((function(t){return t.cateName==e.text}));console.log(o,360,t.cate)}))},methods:{getElInfo:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(o,n){var i={size:!!e.size,rect:!!e.rect,scrollOffset:!!e.scrollOffset},a=uni.createSelectorQuery().in(t),r=e.all?a.selectAll(".".concat(e.all,"-scroll-item")):a.select("#leftScroll");r.fields(i,(function(t){o(t)})).exec()}))},getData:function(){var t=this;uni.request({url:"http://127.0.0.1:5000/goods/catelist",data:{currentPage:1,pageSize:1e3},success:function(e){if(console.log(e,123456789),200==e.statusCode){var o=e.data.data;o=o.filter((function(t){return 1==t.state})),console.log(o,8888),console.log(t.cate,999),t.cate=o,console.log(t.cate,999101)}}}),uni.request({url:"http://127.0.0.1:5000/goods/goods_list",success:function(e){if(console.log(e,101010),200==e.statusCode){var o=e.data.goodsList;console.log(o,985211),t.list=o,t.$nextTick((function(){t.getElInfo({all:"left",size:!0,rect:!0}).then((function(e){t.leftDomsTop=e.map((function(e){return t.cateItemHeight=e.height,e.top}))})),t.getElInfo({all:"right",size:!1,rect:!0}).then((function(e){t.rightDomsTop=e.map((function(t){return t.top}))})),t.showLoading=!1}))}}})},changeCate:function(t){this.activeIndex=t,this.rightScrollTop=this.rightDomsTop[t]},onRightScroll:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.rightDomsTop.forEach((function(o,n){if(o<t.detail.scrollTop+3)return e.activeIndex=n,!1}));case 1:case"end":return o.stop()}}),o)})))()},openDetail:function(t){uni.setStorage({key:"sortInfo",data:JSON.stringify(t),success:function(){console.log("success")}}),console.log(t,898989),uni.navigateTo({url:"/pages/detail/detail"})}}};e.default=r},"868a":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{beforeReady:!0}},onReady:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t.beforeReady=!1}),500)}))}};e.default=n},abae:function(t,e,o){"use strict";o.r(e);var n=o("7def"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},f384:function(t,e,o){"use strict";var n;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"d-flex flex-column",staticStyle:{height:"100vh"}},[o("v-uni-view",{staticClass:"d-flex border-top border-light-secondary animated fadeIn faster",staticStyle:{height:"100%","box-sizing":"border-box"}},[t.beforeReady?o("loading-plus"):t._e(),o("v-uni-scroll-view",{staticClass:"border-right border-light-secondary",staticStyle:{flex:"1",height:"95%"},attrs:{id:"leftScroll","scroll-y":!0,"scroll-top":t.leftScrollTop}},t._l(t.cate,(function(e,n){return o("v-uni-view",{key:n,staticClass:"border-bottom border-light-secondary py-1 left-scroll-item",attrs:{"hover-class":"bg-light-secondary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCate(n)}}},[o("v-uni-view",{staticClass:"py-1 font-md text-muted text-center",class:t.activeIndex===n?"class-active":""},[t._v(t._s(e.cateName))])],1)})),1),o("v-uni-scroll-view",{staticStyle:{flex:"3.5",height:"95%"},attrs:{"scroll-y":!0,"scroll-top":t.rightScrollTop,"scroll-with-animation":!0},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onRightScroll.apply(void 0,arguments)}}},t._l(t.list,(function(e,n){return o("v-uni-view",{key:n,staticClass:"row right-scroll-item"},t._l(e.foods,(function(e,n){return o("v-uni-view",{key:n,staticClass:"span24-8 text-center py-2",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.openDetail(e)}}},[o("v-uni-image",{staticStyle:{width:"120upx",height:"120upx"},attrs:{src:e.imgUrl}}),o("v-uni-text",{staticClass:"d-block"},[t._v(t._s(e.name))])],1)})),1)})),1)],1)],1)},a=[]}}]);